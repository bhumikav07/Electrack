{"ast":null,"code":"var _jsxFileName = \"/Users/bhumika/Desktop/College/FYP/electrack-ui/src/RealTimeChart.js\";\n// import React, { useState, useEffect } from 'react';\n// import { Line } from '@ant-design/charts';\n// const DemoLine = () => {\n//     const [data, setData] = useState([]);\n//     useEffect(() => {\n//         asyncFetch();\n//     }, []);\n//     const asyncFetch = () => {\n//         fetch('http://localhost:8888/visualize-history')\n//             .then((response) => response.json())\n//             .then((json) => setData(json))\n//             .catch((error) => {\n//             console.log('fetch data failed', error);\n//         });\n//     };\n// };\n// export default DemoLine;\nimport React, { useState, useEffect } from 'react';\nimport { Line } from '@ant-design/charts';\nimport { DatePicker } from 'antd';\n\nconst DemoLine = () => {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    asyncFetch();\n  }, []); // useEffect(() => {\n  //     console.log(data);\n  // }, [data]);\n\n  const asyncFetch = () => {\n    var sock = new WebSocket(\"ws://192.168.1.11:3000\"); //replace this address with the one the node.js server prints out. keep port 3000\n\n    sock.onopen = function (event) {\n      //alert(\"Socket connected succesfully!!!\")\n      console.log(\"Connection Successful\");\n    };\n\n    sock.onmessage = function (event) {\n      console.log(event); //show received from server data in console of browser\n\n      var values = event.data.split(\":\");\n      var datadetails = {\n        \"voltage\": values[0],\n        \"current\": values[1],\n        \"power\": values[2],\n        \"energy\": values[3]\n      };\n      var time = new Date();\n      var y = time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds();\n      var x = [{\n        \"date\": y,\n        \"value\": values[0],\n        \"category\": \"Voltage\"\n      }, {\n        \"date\": y,\n        \"value\": values[1],\n        \"category\": \"Current\"\n      }, {\n        \"date\": y,\n        \"value\": values[2],\n        \"category\": \"Power\"\n      }, {\n        \"date\": y,\n        \"value\": values[3],\n        \"category\": \"Energy\"\n      }];\n      console.log(...x);\n      setData(data.push(...x));\n    };\n  };\n\n  var config = {\n    data: data,\n    xField: 'date',\n    yField: 'value',\n    seriesField: 'category',\n    yAxis: {\n      label: {\n        formatter: function formatter(v) {\n          return ''.concat(v).replace(/\\d{1,3}(?=(\\d{3})+$)/g, function (s) {\n            return ''.concat(s, ',');\n          });\n        }\n      }\n    },\n    color: ['#1979C9', '#D62A0D', '#FAA219']\n  };\n  return /*#__PURE__*/React.createElement(Line, Object.assign({}, config, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 12\n    }\n  }));\n};\n\nexport default DemoLine;","map":{"version":3,"sources":["/Users/bhumika/Desktop/College/FYP/electrack-ui/src/RealTimeChart.js"],"names":["React","useState","useEffect","Line","DatePicker","DemoLine","data","setData","asyncFetch","sock","WebSocket","onopen","event","console","log","onmessage","values","split","datadetails","time","Date","y","getHours","getMinutes","getSeconds","x","push","config","xField","yField","seriesField","yAxis","label","formatter","v","concat","replace","s","color"],"mappings":"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","sourcesContent":["// import React, { useState, useEffect } from 'react';\n// import { Line } from '@ant-design/charts';\n// const DemoLine = () => {\n//     const [data, setData] = useState([]);\n//     useEffect(() => {\n//         asyncFetch();\n//     }, []);\n//     const asyncFetch = () => {\n//         fetch('http://localhost:8888/visualize-history')\n//             .then((response) => response.json())\n//             .then((json) => setData(json))\n//             .catch((error) => {\n//             console.log('fetch data failed', error);\n//         });\n//     };\n    \n// };\n// export default DemoLine;\n\n\nimport React, { useState, useEffect } from 'react';\nimport { Line } from '@ant-design/charts';\nimport { DatePicker } from 'antd';\nconst DemoLine = () => {\n    const [data, setData] = useState([]);\n    useEffect(() => {\n        asyncFetch();\n    }, []);\n    // useEffect(() => {\n    //     console.log(data);\n    // }, [data]);\n    const asyncFetch = () => {\n        var sock = new WebSocket(\"ws://192.168.1.11:3000\"); //replace this address with the one the node.js server prints out. keep port 3000\n\n        sock.onopen = function (event) {\n            //alert(\"Socket connected succesfully!!!\")\n            console.log(\"Connection Successful\");\n\n        };\n        sock.onmessage = function (event) {\n            console.log(event); //show received from server data in console of browser\n            var values = event.data.split(\":\");\n            var datadetails = {\n                \"voltage\": values[0],\n                \"current\": values[1],\n                \"power\": values[2],\n                \"energy\": values[3]\n            }\n\n            var time = new Date();\n            var y = time.getHours() + \":\" + time.getMinutes() + \":\" + time.getSeconds();\n            var x = [{\n                \"date\": y,\n                \"value\": values[0],\n                \"category\": \"Voltage\"\n            },\n            {\n                \"date\": y,\n                \"value\": values[1],\n                \"category\": \"Current\"\n            },\n            {\n                \"date\": y,\n                \"value\": values[2],\n                \"category\": \"Power\"\n            },\n            {\n                \"date\": y,\n                \"value\": values[3],\n                \"category\": \"Energy\"\n            }]\n            console.log(...x);\n            setData(data.push(...x));\n        }\n    };\n\n\n\n    var config = {\n        data: data,\n        xField: 'date',\n        yField: 'value',\n        seriesField: 'category',\n        yAxis: {\n            label: {\n                formatter: function formatter(v) {\n                    return ''.concat(v).replace(/\\d{1,3}(?=(\\d{3})+$)/g, function (s) {\n                        return ''.concat(s, ',');\n                    });\n                },\n            },\n        },\n        color : [ '#1979C9' , '#D62A0D' , '#FAA219' ],\n    };\n    return <Line {...config}/>;\n};\nexport default DemoLine;"]},"metadata":{},"sourceType":"module"}